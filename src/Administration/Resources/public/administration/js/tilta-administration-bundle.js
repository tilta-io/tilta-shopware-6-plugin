!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=(window.__sw__.assetPath + '/bundles/tiltaadministrationbundle/'),n(n.s="kG4P")}({"/1mj":function(t,e,n){var r=n("6RaG");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("ydqr").default)("021febb5",r,!0,{})},"6RaG":function(t,e,n){},"7/9d":function(t){t.exports=JSON.parse('{"sw-order":{"detail":{"tilta-payment":"Tilta Zahlung"}}}')},"7Yo/":function(t){t.exports=JSON.parse('{"tilta":{"config":{"testCredentialsButton":{"text":"Test credentials"},"notification":{"validCredentials":"The credentials are correct.","invalidCredentials":"The credentials are unfortunately wrong.","failedToTestCredentials":"An error occurred while checking the credentials!","NOT_AUTHORIZED":"The API token is invalid.","UNAUTHORIZED":"The API token is invalid.","MERCHANT_NOT_FOUND":"The API token is valid. The merchant ID is incorrect. Please double-check it."}}}}')},WlK5:function(t){t.exports=JSON.parse('{"sw-order":{"detail":{"tilta-payment":"Tilta Payment"}}}')},cp0l:function(t){t.exports=JSON.parse('{"tilta":{"config":{"testCredentialsButton":{"text":"Zugangsdaten testen"},"notification":{"validCredentials":"Die Zugangsdaten sind korrekt!","invalidCredentials":"Die Zugangsdaten sind ungültig.","failedToTestCredentials":"Beim Prüfen der Zugangsdaten ist ein Fehler aufgetreten!","NOT_AUTHORIZED":"Der API Token ist ungültig.","UNAUTHORIZED":"Der API Token ist ungültig.","MERCHANT_NOT_FOUND":"Der API Token ist korrekt. Die Händler ID ist nicht korrekt. Bitte prüfen Sie diese noch einmal."}}}}')},kG4P:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===r(a)?a:String(a)),i)}var o,a}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,t);var e,n,r,c=s(l);function l(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"tilta";return i(this,l),(n=c.call(this,t,e,r)).name="tiltaApiService",n}return e=l,(n=[{key:"testCredentials",value:function(t,e,n){return this.httpClient.post("".concat(this.getApiBasePath(),"/test-api-credentials"),{merchantExternalId:t,authToken:e,isSandbox:n},{headers:this.getBasicHeaders()}).then((function(t){return l.handleResponse(t)}))}}])&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Shopware.Classes.ApiService);Shopware.Application.addServiceProvider("tiltaApiService",(function(){var t=Shopware.Application.getContainer("factory"),e=Shopware.Application.getContainer("init"),n=t.apiService,r=new d(e.httpClient,Shopware.Service("loginService")),i=r.name;return n.register(i,r),r}));var u=n("cp0l"),f=n("7Yo/"),p=Shopware,m=p.Component,b=p.Mixin;m.register("tilta-test-api-credentials-button",{template:'{% block tilta_test_api_credentials_button %}\n    <div class="tilta-test-api-credentials-button">\n        {% block tilta_test_api_credentials_button_process_button %}\n            <sw-button-process\n                class="tilta-test-api-credentials-button__process-button"\n                :isLoading="isLoading"\n                :processSuccess="isTestSuccessful"\n                :disabled="isLoading"\n                @click.prevent="testCredentials"\n                @process-finish="onTestFinish"\n                block>\n                {{ $tc(\'tilta.config.testCredentialsButton.text\') }}\n            </sw-button-process>\n        {% endblock %}\n    </div>\n{% endblock %}\n',inject:["tiltaApiService"],mixins:[b.getByName("notification")],snippets:{"de-DE":u,"en-GB":f},props:{apiMode:{type:String,required:!0}},data:function(){return{isLoading:!1,isTestSuccessful:!1}},methods:{onTestFinish:function(){this.isTestSuccessful=!1},testCredentials:function(){var t=this;this.isTestSuccessful=!1,this.isLoading=!0;var e=document.querySelector('[name="TiltaPaymentSW6.config.'.concat(this.apiMode,'ApiMerchantExternalId"]')).value,n=document.querySelector('[name="TiltaPaymentSW6.config.'.concat(this.apiMode,'ApiAuthToken"]')).value,r="sandbox"===this.apiMode;this.tiltaApiService.testCredentials(e,n,r).then((function(e){t.isLoading=!1,e.success?(t.isTestSuccessful=!0,t.createNotificationSuccess({message:t.$tc("tilta.config.notification.validCredentials")})):e.code&&t.$te("tilta.config.notification."+e.code)?t.createNotificationError({message:t.$tc("tilta.config.notification."+e.code)}):t.createNotificationError({message:t.$tc("tilta.config.notification.invalidCredentials")})})).catch((function(){t.isLoading=!1,t.createNotificationError({message:t.$tc("tilta.config.notification.failedToTestCredentials")})}))}}});n("qf2r");var h=n("7/9d"),y=n("WlK5");Shopware.Component.override("sw-order-detail",{template:'{% block sw_order_detail_content_tabs_extension %}\n    {% parent %}\n\n    {% block sw_order_detail_content_tabs_tilta %}\n        <sw-tabs-item\n            v-if="order && order.extensions.tiltaData"\n            class="sw-order-detail__tabs-tab-tilta-payment"\n            :route="{ name: \'sw.order.detail.tilta-payment\', params: { id: $route.params.id } }"\n            :title="$tc(\'sw-order.detail.tilta-payment\')"\n        >\n            {{ $tc(\'sw-order.detail.tilta-payment\') }}\n        </sw-tabs-item>\n    {% endblock %}\n\n{% endblock %}\n',snippets:{"de-DE":h,"en-GB":y}});n("/1mj");function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===v(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=Shopware.Component,O=S.getComponentHelper().mapState;S.register("sw-order-detail-tilta-payment",{template:'<sw-card class="tilta-payment-order-data-card"\n         :title="$tc(\'tilta.orderData.card.title\')"\n         v-if="order.extensions.tiltaData"\n         positionIdentifier="order-details-tilta-card">\n    {% block tilta_payment_order_data %}\n        <sw-container columns="repeat(auto-fit, minmax(250px, 1fr))" gap="30px 30px">\n\n            <sw-description-list columns="1fr" grid="1fr">\n                <dt>{{ $tc(\'tilta.orderData.fields.status.label\') }}</dt>\n                <dd>\n                    {{ order.extensions.tiltaData.status }}\n                </dd>\n            </sw-description-list>\n\n            <sw-description-list columns="1fr" grid="1fr">\n                <dt>{{ $tc(\'tilta.orderData.fields.orderExternalId.label\') }}</dt>\n                <dd>\n                    {{ order.extensions.tiltaData.orderExternalId }}\n                </dd>\n            </sw-description-list>\n\n            <sw-description-list columns="1fr" grid="1fr">\n                <dt>{{ $tc(\'tilta.orderData.fields.buyerExternalId.label\') }}</dt>\n                <dd>\n                    {{ order.extensions.tiltaData.buyerExternalId }}\n                </dd>\n            </sw-description-list>\n\n            <sw-description-list columns="1fr" grid="1fr">\n                <dt>{{ $tc(\'tilta.orderData.fields.invoiceNumber.label\') }}</dt>\n                <dd>\n                    <sw-text-field v-model="order.extensions.tiltaData.invoiceNumber"></sw-text-field>\n                </dd>\n            </sw-description-list>\n\n            <sw-description-list columns="1fr" grid="1fr">\n                <dt>{{ $tc(\'tilta.orderData.fields.invoiceExternalId.label\') }}</dt>\n                <dd>\n                    <sw-text-field v-model="order.extensions.tiltaData.invoiceExternalId"></sw-text-field>\n                </dd>\n            </sw-description-list>\n\n        </sw-container>\n    {% endblock %}\n</sw-card>\n',inject:["acl"],metaInfo:function(){return{title:"Tilta Payment"}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},O("swOrderDetail",["order"]))}),Shopware.Module.register("sw-order-detail-tab-tilta-payment",{routeMiddleware:function(t,e){"sw.order.detail"===e.name&&e.children.push({name:"sw.order.detail.tilta-payment",path:"/sw/order/detail/:id/tilta-payment",component:"sw-order-detail-tilta-payment",meta:{parentPath:"sw.order.detail",meta:{parentPath:"sw.order.index",privilege:"order.viewer"}}}),t(e)}})},qf2r:function(t,e){var n=Shopware.Component,r=function(t){t.response&&t.response.data&&t.response.data.errors?"TILTA__INVOICE_NUMBER_MISSING"===t.response.data.errors.pop().code?this.createNotificationError({message:this.$tc("tilta.transition.errors.invoiceNumberMissing")}):this.$super("createStateChangeErrorNotification",t):this.$super("createStateChangeErrorNotification",t)};n.override("sw-order-state-history-card",{methods:{createStateChangeErrorNotification:r}}),n.override("sw-order-general-info",{methods:{createStateChangeErrorNotification:r}}),n.override("sw-order-details-state-card",{methods:{createStateChangeErrorNotification:r}})},ydqr:function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=o[0],s={id:t+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}n.r(e),n.d(e,"default",(function(){return m}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},a=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,l=!1,d=function(){},u=null,f="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(t,e,n,i){l=n,u=i||{};var a=r(t,e);return b(a),function(e){for(var n=[],i=0;i<a.length;i++){var s=a[i];(c=o[s.id]).refs--,n.push(c)}e?b(a=r(t,e)):a=[];for(i=0;i<n.length;i++){var c;if(0===(c=n[i]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete o[c.id]}}}}function b(t){for(var e=0;e<t.length;e++){var n=t[e],r=o[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(y(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(y(n.parts[i]));o[n.id]={id:n.id,refs:1,parts:a}}}}function h(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function y(t){var e,n,r=document.querySelector("style["+f+'~="'+t.id+'"]');if(r){if(l)return d;r.parentNode.removeChild(r)}if(p){var i=c++;r=s||(s=h()),e=w.bind(null,r,i,!1),n=w.bind(null,r,i,!0)}else r=h(),e=S.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var v,g=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function w(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=g(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function S(t,e){var n=e.css,r=e.media,i=e.sourceMap;if(r&&t.setAttribute("media",r),u.ssrId&&t.setAttribute(f,e.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}}});